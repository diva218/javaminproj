<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.image.ImageView?>

<StackPane xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="controller.MainViewController"
           stylesheets="@styles.css"
           styleClass="kpop-background">

    <children>

        <!-- ðŸŒˆ FLOATING PASTEL BLOBS -->
        <Circle radius="260" layoutX="280" layoutY="120" styleClass="blob-pink"/>
        <Circle radius="200" layoutX="1100" layoutY="300" styleClass="blob-purple"/>
        <Circle radius="180" layoutX="300" layoutY="650" styleClass="blob-blue"/>

        <!-- âœ¨ ANIMATED FLOATING STICKERS -->
        <Pane styleClass="sticker-layer">
            <children>
                <Label text="âœ¨" layoutX="180" layoutY="260" styleClass="floating-sticker float-anim-1"/>
                <Label text="ðŸ’–" layoutX="880" layoutY="160" styleClass="floating-sticker float-anim-2"/>
                <Label text="ðŸ“" layoutX="1250" layoutY="430" styleClass="floating-sticker float-anim-1"/>
                <Label text="ðŸŒ¸" layoutX="450" layoutY="520" styleClass="floating-sticker float-anim-2"/>
            </children>
        </Pane>

        <!-- MAIN CONTENT -->
        <BorderPane maxWidth="1400" styleClass="main-container">

            <!-- ðŸŒ¸ HEADER -->
            <top>
                <VBox spacing="15" styleClass="card glass-card">
                    <padding><Insets top="20" right="25" bottom="20" left="25"/></padding>
                    <children>

                        <!-- Title + Logout -->
                        <HBox spacing="20" alignment="CENTER_LEFT">
                            <Label text="Food Inventory Dashboard" styleClass="header-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="Logout"
                                    fx:id="logoutButton"
                                    onAction="#handleLogout"
                                    styleClass="primary-btn bouncy"/>
                        </HBox>

                        <!-- Search Row -->
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="searchField"
                                       promptText="Search items..."
                                       styleClass="search-bar"
                                       HBox.hgrow="ALWAYS"/>
                            <Button text="Search"
                                    onAction="#handleSearch"
                                    styleClass="secondary-btn bouncy"/>
                        </HBox>

                    </children>
                </VBox>
            </top>

            <!-- ðŸŒ¼ TABLE SECTION -->
            <center>
                <VBox alignment="CENTER" spacing="15">
                    <padding><Insets all="25"/></padding>

                    <VBox styleClass="card glass-card">
                        <padding><Insets all="25"/></padding>

                        <TableView fx:id="inventoryTable"
                                   prefHeight="450"
                                   styleClass="kpop-table">

                            <columns>
                                <TableColumn fx:id="nameColumn" text="Item Name" prefWidth="200"/>
                                <TableColumn fx:id="quantityColumn" text="Quantity" prefWidth="120"/>
                                <TableColumn fx:id="expiryColumn" text="Expiry Date" prefWidth="160"/>
                                <TableColumn fx:id="supplierColumn" text="Supplier" prefWidth="150"/>
                            </columns>

                        </TableView>
                    </VBox>
                </VBox>
            </center>

            <!-- ðŸŽ = ADD / EDIT AREA -->
            <bottom>
                <VBox spacing="15" styleClass="card glass-card">
                    <padding><Insets top="20" right="25" bottom="25" left="25"/></padding>

                    <Label text="Add / Edit Item" styleClass="section-title"/>

                    <GridPane hgap="20" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="35"/>
                            <ColumnConstraints percentWidth="65"/>
                        </columnConstraints>

                        <children>
                            <Label text="Item Name:" GridPane.rowIndex="0"/>
                            <TextField fx:id="itemNameField"
                                       promptText="Enter name"
                                       styleClass="kpop-input"
                                       GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Quantity:" GridPane.rowIndex="1"/>
                            <TextField fx:id="quantityField"
                                       promptText="Enter quantity"
                                       styleClass="kpop-input"
                                       GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="Expiry:" GridPane.rowIndex="2"/>
                            <DatePicker fx:id="expiryDatePicker"
                                        styleClass="kpop-input"
                                        GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                            <Label text="Supplier:" GridPane.rowIndex="3"/>
                            <TextField fx:id="supplierField"
                                       promptText="Enter supplier"
                                       styleClass="kpop-input"
                                       GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                        </children>
                    </GridPane>

                    <HBox spacing="20" alignment="CENTER_RIGHT">
                        <Button text="Add Item"
                                onAction="#handleAddItem"
                                styleClass="primary-btn bouncy"/>

                        <Button text="Update"
                                onAction="#handleUpdateItem"
                                styleClass="secondary-btn bouncy"/>

                        <Button text="Delete"
                                onAction="#handleDeleteItem"
                                styleClass="danger-btn bouncy"/>
                    </HBox>

                </VBox>
            </bottom>

        </BorderPane>
    </children>
</StackPane>



